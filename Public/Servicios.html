<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Servicios usuario</title>
    <link rel="stylesheet" href="/css/style.css" />
    <script
      type="module"
      src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"
    ></script>
    <script
      nomodule
      src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"
    ></script>
  </head>

  <body class="home">
    <div class="menu-btn" id="menu-btn">
      <ion-icon name="menu-outline"></ion-icon>
    </div>

    <nav class="sidebar" id="sidebar">
      <div class="sidebar-logo">
        <img src="/Assets/Logo.png" alt="" />
        <h3>Manzanas del</h3>
        <h3>Cuidado</h3>
      </div>
      <ul>
        <li class="submenu">
          <a href="#" class="submenu-btn">
            <div class="submenu-item">
              <ion-icon name="home-outline" class="home-icon"></ion-icon>
              <p>Inicio</p>
              <ion-icon
                name="chevron-down-outline"
                class="down-icon"
              ></ion-icon>
            </div>
          </a>

          <ul class="submenu-content">
            <li><a href="#">Dashboard</a></li>
            <li><a href="#">Mi Perfil</a></li>
            <li><a href="/listado-usuarios.html">Usuarios</a></li>
          </ul>
        </li>

        <li><a href="/Servicios.html">Servicios</a></li>
        <li><a href="#" onclick="logout()">Cerrar Sesion</a></li>
      </ul>
    </nav>

    <div class="content">
      <h1>Listado De Servicios</h1>
      <div class="button">
        <a href="/crear.html"><input type="submit" value="Crear Servicio" /></a>
      </div>
      <table>
        <thead>
          <tr>
            <th>Nombre del Servicio</th>
            <th>Fecha</th>
            <!-- <th>Guardar</th> -->
          </tr>
        </thead>
        <tbody id="userServicesTable">
        </tbody>
      </table>
    </div>

    <script src="/Js/script-2.js"></script>
    <script src="/Js/auth.js"></script>
    <script>
      function loadUserServices() {
        fetch("http://localhost:3000/servicio/listarServiciosUsuario")
          .then((res) => res.json())
          .then((data) => {
            console.log(data);
            
            const table = document.getElementById('userServicesTable')
            table.innerHTML = ''
            data.forEach(service => {
                const row = document.createElement('tr')

                const serviceName = document.createElement('td')
                serviceName.textContent = service.Ser_Nombre
                row.appendChild(serviceName)

                const serviceFecha = document.createElement('td')
                serviceFecha.textContent = service.Sol_Fecha
                row.appendChild(serviceFecha)

                table.appendChild(row)
            });

          });
      }
      loadUserServices()
    </script>
  </body>
</html>
